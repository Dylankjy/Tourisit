{% extends 'base.html' %}

{% block scripts %}
    <link rel="stylesheet" href="/css/shop.css">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/profile.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma-calendar@6.0.9/dist/css/bulma-calendar.min.css">
{% endblock %}


{% block content %}>
    <div class="container">
        <h1 class="is-size-1 has-text-weight-bold mt-6">My Settings</h1>
        <div class="columns">

            <!-- Side Profile Page -->
            <div class="column is-one-fifth">
                <div class="section">
                    <div class="box is-centered p-0">
                        <p>
                            <button class="button is-fullwidth is-active">Account Info</button>
                        </p>
                        <p>
                            <button class="button is-fullwidth">Billing</button>
                        </p>
                    </div>
                </div>
            </div>
            <!-- Content -->
            <div class="column">
                <div class="section">
                    <!-- Update account settings -->
                    <h1 class="is-size-4 has-text-left has-text-weight-bold">Account Details</h1>
                    <form class="form-horizontal" action="/me/settings/{{ user['_id'] }}" method="POST">
                        {{ form.csrf_token }}
                        <fieldset>

                            <div class="field">
                                <label class="label" for="name">Name:</label>
                                <div class="control">
                                    {{ form.name(id="name", type="text", class="input", placeholder="", value=user.name) }}
                                    <ul>
                                        {% for error in form.name.errors %}
                                            <li class="has-text-danger"> {{ error }}</li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            </div>

                            <div class="field">
                                <label class="label" for="name">Password:</label>
                                <div class="control">
                                    {{ form.name(id="name", type="text", class="input", placeholder="", value=user.password) }}
                                    <ul>
                                        {% for error in form.name.errors %}
                                            <li class="has-text-danger"> {{ error }}</li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            </div>

                            <div class="field">
                                <label class="label" for="name">Email Address:</label>
                                <div class="control">
                                    {{ form.name(id="name", type="text", class="input", placeholder="", value=user.email) }}
                                    <ul>
                                        {% for error in form.name.errors %}
                                            <li class="has-text-danger"> {{ error }}</li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            </div>

                            <div class="field">
                                <label class="label" for="name">Phone Number:</label>
                                <div class="control">
                                    {{ form.name(id="name", type="text", class="input", placeholder="", value=user.phone_number) }}
                                    <ul>
                                        {% for error in form.name.errors %}
                                            <li class="has-text-danger"> {{ error }}</li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            </div>

                            <div class="field">
                                <label class="label" for="user-submit"></label>
                                <div class="control">
                                    <input type='submit' value='Update!' id="user-submit" name="user-submit"
                                           class="button is-success">
                                </div>
                            </div>

                        </fieldset>
                    </form>


                    <!-- Update personal details -->
                    <h1 class="is-size-4 has-text-left has-text-weight-bold pt-3">Personal</h1>

                    <div class="field is-grouped is-grouped-centered is-align-items-center">
                        <label class="control-label pr-3">Birthday</label>
                        <p class="control is-expanded">
                            <input class="input" type="date">
                        </p>
                    </div>

                    <p class="is-size-5">Gender</p>
                    <p class="is-size-5">Language</p>

                    <!-- Social Media -->
                    <h1 class="is-size-4 has-text-left has-text-weight-bold pt-3">Social Media</h1>
                    <div class="field">
                        <label class="label">Facebook</label>
                        <div class="control">
                            <input class="input" type="text" placeholder="e.g. www.facebook.com/Derpy">
                        </div>
                    </div>
                    <div class="field">
                        <label class="label">Instagram</label>
                        <div class="control">
                            <input class="input" type="text" placeholder="e.g. www.instagram.com/Derpy">
                        </div>
                    </div>
                    <div class="field">
                        <label class="label">LinkedIn</label>
                        <div class="control">
                            <input class="input" type="text" placeholder="e.g. www.linkedin.com/Derpy">
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <script src="https://cdn.jsdelivr.net/npm/bulma-calendar@6.0.9/dist/js/bulma-calendar.min.js"></script>
    <script>
        // Initialize all input of date type.
        const calendars = bulmaCalendar.attach('[type="date"]', options);

        // Loop on each calendar initialized
        calendars.forEach(calendar => {
            // Add listener to select event
            calendar.on('select', date => {
                console.log(date);
            });
        });

        // To access to bulmaCalendar instance of an element
        const element = document.querySelector('#my-element');
        if (element) {
            // bulmaCalendar instance is available as element.bulmaCalendar
            element.bulmaCalendar.on('select', datepicker => {
                console.log(datepicker.data.value());
            });
        }
    </script>
{% endblock %}
